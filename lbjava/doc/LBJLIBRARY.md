# The LBJ Library 

The LBJ programming framework is supported by a library of interfaces, learning algorithms,
and implementations of the building blocks described in Chapter 4. This chapter gives a general
overview of each of those codes. .

The library is currently organized into five packages. `LBJ2.classify` contains classes related
to features and classification. `LBJ2.learn` contains learner implementations and supporting
classes. `LBJ2.infer` contains inference algorithm implementations and internal representations
for constraints and inference structures. `LBJ2.parse` contains the Parser interface and some
general purpose internal representation classes. Finally, `LBJ2.nlp` contains some basic natural
language processing internal representations and parsing routines. In the future, we plan to
expand this library, adding more varieties of learners and domain specific parsers and internal
representations.

## `LBJ2.classify`

The most important class in LBJ’s library is `LBJ2.classify.Classifier`. This abstract class
is the interface through which the application accesses the classifiers defined in the LBJ source
file. However, the programmer should, in general, only have need to become familiar with a few
of the methods defined there.

One other class that may be of broad interest is the `LBJ2.classify.TestDiscrete` class
(discussed in Section 5.1.8), which can automate the performance evaluation of a discrete learning
classifier on a labeled test set. The other classes in this package are designed mainly for internal
use by LBJ’s compiler and can be safely ignored by the casual user. More advanced users who
writes their own learners or inference algorithms in the application, for instance, will need to
become familiar with them.

## `LBJ2.classify.Classifier`

The most important class in LBJ’s library is `LBJ2.classify.Classifier`. This abstract class
is the interface through which the application accesses the classifiers defined in the LBJ source
file. However, the programmer should, in general, only have need to become familiar with a few
of the methods defined there.

One other class that may be of broad interest is the `LBJ2.classify.TestDiscrete` class
(discussed in Section 5.1.8), which can automate the performance evaluation of a discrete learning
classifier on a labeled test set. The other classes in this package are designed mainly for internal
use by LBJ’s compiler and can be safely ignored by the casual user. More advanced users who
writes their own learners or inference algorithms in the application, for instance, will need to
become familiar with them. 

## `LBJ2.classify.Classifier`

Every classifier declaration in an LBJ source file is translated by the compiler into a Java class
that extends this class. When the programmer wants to call a classifier in the application, 
he creates an object of his classifier’s class using its zero argument constructor and calls an
appropriate method on that object. The appropriate method will most likely be one of the
following four methods:

 - `String discreteValue(Object)`: 
  This method will only be overridden in the classifier’s implementation if its feature return
  type is `discrete`. Its return value is the value of the single feature this classifier returns.
 - `double realValue(Object)`:
  This method will only be overridden in the classifier’s implementation if its feature return
  type is `real`. Its return value is the value of the single feature this classifier returns.
 - `String[] discreteValueArray(Object)`:
  This method will only be overridden in the classifier’s implementation if its feature return
  type is `discrete[]`. Its return value contains the values of all the features this classifier
  returns.
 - `double[] realValueArray(Object)`:
  This method will only be overridden in the classifier’s implementation if its feature return
  type is `real[]`. Its return value contains the values of all the features this classifier returns.
There is no method similar to the four above for accessing the values of features produced
by a feature generator, since those values are meaningless without their associated names. When
the programmer wants access to the actual features produced by any classifier (not just feature
generators), the following non-static method is used. Note, however, that the main purpose of
this method is for internal use by the compiler 
(One circumstance where the programmer may be interested in this method is to print out the `String` representation
of the returned `FeatureVector`.) 
 - `FeatureVector classify(Object)`:
  This method is overridden in every classifier implementation generated by the LBJ compiler.
  It returns a `FeatureVector` which may be iterated through to access individual features
  (see Section 5.1.3).
  
Every classifier implementation generated by the compiler overrides the following non-static
member methods as well. They provide type information about the implemented classifier.
 - `String getInputType()`:
This method returns a `String` containing the fully qualified name of the class this classifier
expects as input.  
 - `String getOutputType()`:
  This method returns a `String` containing the feature return type of this classifier. If the
  classifier is `discrete` and contains a list of allowable values, it will not appear in the output
  of this method.
  
 - `String[] allowableValues()`:
  If the classifier is `discrete` and contains a list of allowable values, that list will be returned
  by this method. Otherwise, an array of length zero is returned. Learners that require a
  particular number of allowable values may return an array filled with `"*"` whose length
  indicates that number.
  
  Finally, class `Classifier` provides a simple static method for testing the agreement of two
  classifiers. It’s convenient, for instance, when testing the performance of a learned classifier
  against an oracle classifier.
  
  `double test(Classifier, Classifier, Object[])`:
  This static method returns the fraction of objects in the third argument that produced the
  same classifications from the two argument `Classifiers`.
  
  There are several other methods of this class described in the Javadoc documentation. They
  are omitted here since the programmer is not expected to need them.
  
  ### 5.1.2 `LBJ2.classify.Feature`
  
  This abstract class is part of the representation of the value produced by a classifier. In particular,
  the name of a feature, but not its value, is stored here. Classes derived from this class (described
  below) provide storage for the value of the feature. This class exists mainly for internal use by
  the LBJ compiler, and most programmers will not need to be familiar with it.
  
 - `LBJ2.classify.DiscreteFeature`:
  The value of a feature returned by a `discrete` classifier is stored as a String in objects
  of this class.
 - `LBJ2.classify.DiscreteArrayFeature`:
  The `String` value of a feature returned by a `discrete[]` classifier as well as its integer
  index into the array are stored in objects of this class.
 - `LBJ2.classify.RealFeature`:
  The value of a feature returned by a `real` classifier is stored as a `double` in objects of this
  class.
 - `LBJ2.classify.RealArrayFeature`:
  The double value of a feature returned by a `real[]` classifier as well as its integer index
  into the array are stored in objects of this class.
  
### 5.1.3 `LBJ2.classify.FeatureVector`
`FeatureVector` is a linked-list-style container which stores features that function as labels separately
from other features. It contains methods for iterating through the features and labels and
adding more of either. Its main function is as the return value of the `Classifier#classify(Object)`
method which is used internally by the LBJ compiler (see Section 5.1.1). Most programmers will
not need to become intimately familiar with this class.  
  
### 5.1.4 `LBJ2.classify.Score`
This class represents the double score produced by a discrete learning classifier is association
with one of its String prediction values. Both items are stored in an object of this class.
This class is used internally by LBJ’s inference infrastructure, which will interpret the score as
an indication of how much the learning classifier prefers the associated prediction value, higher
scores indicating more preference.
### 5.1.5 `LBJ2.classify.ScoreSet`
This is another class used internally by LBJ’s inference infrastructure. An object of this class is
intended to contain one Score for each possible prediction value a learning classifier is capable
of returning.
### 5.1.6 `LBJ2.classify.ValueComparer`
This simple class derived from Classifier is used to convert a multi-value discrete classifier
into a Boolean classifier that returns true if and only if the multi-valued classifier evaluated
to a particular value. ValueComparer is used internally by SparseNetworkLearner (see Section
5.2.6).
### 5.1.7 `Vector Returners`
The classes LBJ2.classify.FeatureVectorReturner and
LBJ2.classify.LabelVectorReturner are used internally by the LBJ compiler to help implement
the training procedure when the programmer specifies multiple training rounds (see Section
4.1.2.6). A feature vector returner is substituted as the learning classifier’s feature extraction
classifier, and a label vector returner is substituted as the learning classifier’s labeler (see Section
5.2.1 to see how this substitution is performed). Each of them then expects the object received as
input by the learning classifier to be a FeatureVector, which is not normally the case. However,
as will be described in Section 5.4.4, the programmer may still be interested in these classes if he
wishes to continue training a learning classifier for additional rounds on the same data without
incurring the costs of performing feature extraction.
### 5.1.8 `LBJ2.classify.TestDiscrete`
This class can be quite useful to quickly evaluate the performance of a newly learned classifier
on labeled testing data. It operates either as a stand-alone program or as a class that may be
imported into an application for more tailored use. In either case, it will automatically compute
accuracy, precision, recall, and F1 scores for the learning classifier in question.
To use this class inside an application, simply instantiate an object of it using the noargument
constructor. Lets call this object tester. Then, each time the learning classifier makes
a prediction p for an object whose true label is l, make the call tester.reportPrediction(p,
l). Once all testing objects have been processed, the printPerformance(java.io.PrintStream)
method may be used print a table of results, or the programmer may make use of the various
other methods provided by this class to retrieve the computed statistics. More detailed usage of  
  